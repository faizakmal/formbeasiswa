<form id="formPendaftaran">
  <input type="text" name="nama" placeholder="Nama" required><br>
  <input type="email" name="email" placeholder="Email" required><br>
  <input type="text" name="sekolah" placeholder="Sekolah" required><br>
  <input type="file" name="file" accept=".pdf,.jpg,.png" required><br>
  <button type="submit">Kirim</button>
</form>

<script>
  const form = document.getElementById('formPendaftaran');

  form.addEventListener('submit', async function (e) {
    e.preventDefault();

    const formData = new FormData(form);
    const file = formData.get('file');

    const reader = new FileReader();
    reader.onload = async function () {
      const base64 = reader.result.split(',')[1]; // Hapus header base64

      const body = {
        nama: formData.get('nama'),
        email: formData.get('email'),
        sekolah: formData.get('sekolah'),
        fileData: base64,
        fileName: file.name,
        fileType: file.type
      };

      const response = await fetch("https://script.google.com/macros/s/AKfycbzsbXHD6A6gncf_d6lT_NtRBsKifv-dgoD6jbTW21-C1PxHJ5RYNIhBNtP3-BWL2e0HTQ/exec", {
        method: "POST",
        body: JSON.stringify(body),
        headers: {
          "Content-Type": "application/json"
        }
      });

      const result = await response.json();
      alert("Data berhasil dikirim!");
    };

    reader.readAsDataURL(file);
  });
</script>
